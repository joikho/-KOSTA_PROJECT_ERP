<!doctype html>
<html lang="ko">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
   
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./logincss.css">
    <title>login</title>




    <!-- jqury 사용 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script> //script 시작
        //돔트리가 완성될 때 까지 기다린 후 $(function(){}) 의 내용을 읽기
        $(function(){ 
            //dom트리에서 from객체찾기
            let $formObj = $("form");
            //form이 submit이 되면
            $formObj.submit(function(){ //form의 submit 시작
                //클라이언트에서 입력된 아이디값
                let idValue = $("input[name=username]").val();
                //클라이언트에서 입력된 비밀번호값
                let pwdvalue = $("input[name=password]").val();

                let url = "./login"; //요청할 url
                let method = "post"; //전달방식
                let data = {"id": idValue, "pwd" : pwdvalue}; //전달할 데이터

                //ajax 시작
                $.ajax({
                    url :url,
                    method :method,
                    data: data,
                    success:function(responseObj){ //json 객체로 사용
	                     if(responseObj.status == 1){
	                        alert("로그인성공");
	                        // 로컬스토리지에 내용 다 지우고 로그인된 아이디 값 저장 추가
	                        localStorage.clear();
	                        localStorage.setItem('id', idValue);
	                        location.href ="./index.html";
	                    }else{
	                        alert("로그인실패");
	                    } 
	                    //성공응답
                    },
                    //실패응답
                    error:function(jqXHR){
                        alert(jqXHR.status);
                    }

                }); //ajax 끝
                return false; //기존이벤트 실행막기
            }); //form submit 끝
            
            //alert("END JavaScript");
        }); //dom트리 끝
    </script>  <!-- script 끝-->
  </head>
  <body>
    <div class="container">
        <div id="login">
            <h3 class="text-center  pt-5" class="title8hours" style="color: teal;">8hours</h3>
            <div class="container">
                <div id="login-row" class="row justify-content-center align-items-center">
                    <div id="login-column" class="col-md-6">
                        <div id="login-box" class="col-md-12">
                            <form id="login-form" class="form" method="post">
                                <h3 class="text-center text-info">로그인</h3>
                                <div class="form-group">
                                    <label for="username" class="text-info">아이디:</label><br>
                                    <input type="text" name="username" id="username" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="password" class="text-info">비밀번호:</label><br>
                                    <input type="password" name="password" id="password" class="form-control">
                                </div>
                                <div class="form-group" class="text-center">
                                    <!-- <label for="remember-me" class="text-info"><span>아이디저장하기</span> <span><input id="remember-me" name="remember-me" type="checkbox"></span></label><br> -->
                                    <input type="submit" name="submit" class="btn btn-info btn-md" value="로그인">
                                </div>
                                <div id="register-link" class="text-right">
                                    <a href="#" class="text-info"></a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> -->
  </body>
</html>